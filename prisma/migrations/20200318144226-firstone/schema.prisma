
// datasource mysql {
//   provider = "mysql"
//   url = "***"
//   enabled  = false
// }

// generator photon {
//   provider = "photonjs"
//   // binaryTargets = ["native"]
// }

generator client {
  provider = "prisma-client-js"
}

datasource postgresql {
  provider = "postgresql"
  url = "***"
  enabled  = true

}

model User {
  id          String        @default(cuid()) @id
  code        Int           @unique
  email       String        @unique
  password    String
  firstName   String
  lastName    String
  title       String?
  createdAt   DateTime      @default(now())
  updatedAt   DateTime      @updatedAt
  // timeCards   TimeCard[]
  timeRoles   TimeRole[]
  punchCards  PunchCard[]
  // group: [UserGroup]
  permissions Permission[]
  events      TimeRequest[]
}

model PunchCard {
  id        String   @default(cuid()) @id
  user      User
  punchIn   DateTime
  punchOut  DateTime
  timeRole  TimeRole
  updatedAt DateTime @updatedAt
  createdAt DateTime @default(now())
}

model TimeRole {
  id          String      @default(cuid()) @id
  name        String
  shortName   String
  description String
  payRate     Int
  users       User[]
  // timeCards   TimeCard[]
  punchCards  PunchCard[]
  updatedAt   DateTime    @updatedAt
  createdAt   DateTime    @default(now())
}

enum Permission {
  ADMIN USER TIMECARDVIEWER TIMECARDEDITOR
}

enum Punchtype {
  CLOCKIN CLOCKOUT
}

model TimeRequest {
  id        String   @default(cuid()) @id
  user      User
  reason    String
  approved  Boolean?
  startTime DateTime
  endTime   DateTime
  isAllDay  Boolean  @default(false)
  updatedAt DateTime @updatedAt
  createdAt DateTime @default(now())
}

model TaskGroup {
  id        String   @default(cuid()) @id
  name      String
  tasks     Task[]
  updatedAt DateTime @updatedAt
  createdAt DateTime @default(now())
}

model Task {
  id            String   @default(cuid()) @id
  name          String
  parentTask    Task?    @relation(name: "newTaskCheck")
  childrenTasks Task[]   @relation(name: "newTaskCheck")
  updatedAt     DateTime @updatedAt
  createdAt     DateTime @default(now())
}